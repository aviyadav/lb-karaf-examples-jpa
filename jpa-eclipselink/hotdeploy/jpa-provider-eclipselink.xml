<?xml version="1.0" encoding="UTF-8"?>
<!--
    First install the EclipseLink JPA bundles:
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!org.eclipse.persistence/org.eclipse.persistence.asm/3.3.1.v201206041142
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!mvn:org.eclipse.persistence/org.eclipse.persistence.antlr/3.2.0.v201206041011
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!org.eclipse.persistence/org.eclipse.persistence.antlr/3.2.0.v201206041011
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!org.eclipse.persistence/org.eclipse.persistence.core/2.4.1
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!org.eclipse.persistence/org.eclipse.persistence.jpa.jpql/2.4.1
    karaf@root> install -s mvn:http://download.eclipse.org/rt/eclipselink/maven.repo\!org.eclipse.persistence/org.eclipse.persistence.jpa/2.4.1

    Then copy this file to the deploy folder
-->
<blueprint default-activation="eager"
           xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <manifest xmlns="http://karaf.apache.org/xmlns/deployer/blueprint/v1.0.0">
        Bundle-Name: Karaf Examples :: JPA :: Provider :: EclipseLlink
        Bundle-SymbolicName: karaf.examples.eclipselink.provider
        Bundle-Version: 1.0.0.SNAPSHOT
        DynamicImport-Package: *
        Require-Bundle: org.eclipse.persistence.core,org.eclipse.persistence.jpa
    </manifest>

    <bean id = "eclipselink_provider"
          class = "org.eclipse.persistence.jpa.PersistenceProvider"
          scope = "prototype"/>

    <service ref="eclipselink_provider" interface="javax.persistence.spi.PersistenceProvider">
        <service-properties>
            <entry key  ="javax.persistence.provider"
                   value="org.eclipse.persistence.jpa.PersistenceProvider"/>
            <entry key  ="javax.persistence.PersistenceProvider"
                   value="org.eclipse.persistence.jpa.PersistenceProvider"/>
            <entry key  ="osgi.jndi.service.name"
                   value="eclipselink/pesistence_provider"/>
        </service-properties>
    </service>

</blueprint>